{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./common/common.js","webpack:///./common/dynamodb.js","webpack:///./common/statusCode.js","webpack:///./customer/customerCRUD.js","webpack:///external \"aws-sdk\"","webpack:///external \"babel-runtime/core-js/json/stringify\"","webpack:///external \"babel-runtime/helpers/asyncToGenerator\"","webpack:///external \"babel-runtime/helpers/classCallCheck\"","webpack:///external \"babel-runtime/helpers/createClass\"","webpack:///external \"babel-runtime/regenerator\"","webpack:///external \"dotenv\"","webpack:///external \"source-map-support/register\""],"names":["common","statusCode","message","res","StatusCode","headers","body","tableName","items","params","TableName","Item","key","keyvalue","KeyConditionExpression","ExpressionAttributeValues","decodeURIComponent","require","config","path","options","console","log","process","env","IS_OFFLINE","region","endpoint","dynamoDB","DynamoDB","DocumentClient","code_status","addCustomer","getCustomersList","getCustomer","dynamodb","AWS","getStatusCode","event","context","callback","eventData","email","created_at","Date","getTime","pathParameters","Common","callbackHandler","BAD_REQUEST","JSON","parse","customerData","postParams","CUSTOMER_INFO","NO_CONTENT","put","err","data","undefined","OK","cutsomerData","callbackWaitsForEmptyEventLoop","scanParams","scan","queryParams","query","result","Items","length"],"mappings":"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","file":"customer/customerCRUD.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./customer/customerCRUD.js\");\n","export default class common {\n\tconstructor() {\n\t\t// console.log('In common js constructor');\n\t}\n\n\tcallbackHandler(statusCode, message) {\n\n\t\tlet res = {\n\t\t\tStatusCode: statusCode,\n\t\t\theaders: {\n\t\t\t\t'Access-Control-Allow-Origin': '*',\n\t\t\t\t'Access-Control-Allow-Headers': '*',\n\t\t\t\t'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS,POST,PUT' \n\t\t\t},\n\t\t\tbody: JSON.stringify(message)\n\t\t};\n        \n\t\treturn res;\n\t}\n    \n\tpostParams(tableName, items) {\n\t\tlet params = {\n\t\t\tTableName: tableName,\n\t\t\tItem: items\n\t\t};\n\n\t\treturn params;\n\t}\n    \n\tscanParams(tableName) {\n\t\tlet params = {\n\t\t\tTableName: tableName\n\t\t};\n        \n\t\treturn params;\n\t}\n\n\tqueryParams(tableName, key, keyvalue) {\n\t\tlet params = {\n\t\t\tTableName: tableName,\n\t\t\tKeyConditionExpression: `${key} = :pk`,\n\t\t\tExpressionAttributeValues: {\n\t\t\t\t':pk': decodeURIComponent(keyvalue)\n\t\t\t}\n\t\t};\n\t\treturn params;\n\t}\n}","require(\"dotenv\").config({ path: \"../.env\" /* path to your project root folder */ });\nimport { DynamoDB } from 'aws-sdk'; // eslint-disable-line import/no-extraneous-dependencies\n// import AWS from 'aws-sdk';\nlet options = {};\nconsole.log('Envoirment -----> ', process.env.IS_OFFLINE)\n// connect to local DB if running offline\nif (!process.env.IS_OFFLINE) {\n\tconsole.log('Inside of offline')\n\toptions = {\n\t\tregion: 'us-east-1',\n\t\tendpoint: 'http://localhost:8000',\n\t};\n}\n\nconsole.log('Outside')\nconst dynamoDB = new DynamoDB.DocumentClient(options);\n\nexport default dynamoDB;","export default class StatusCode {\n\tconstructor() {\n\t\t// console.log('Inside Status code file');\n\t}\n\n\tgetStatusCode() {\n\t\tlet code_status = {\n\t\t\t'OK': 200,\n\t\t\t'CREATED': 201,\n\t\t\t'NO_CONTENT': 204,\n\t\t\t'PARTIAL_CONTENT': 206,\n\t\t\t'NOT_MODIFIED': 304,\n\t\t\t'BAD_REQUEST': 400,\n\t\t\t'UNAUTHORIZED': 401,\n\t\t\t'FORBIDDEN': 403,\n\t\t\t'NOT_FOUND': 404,\n\t\t\t'INTERNAL_SERVER_ERROR': 500\n\t\t};\n        \n\t\treturn code_status;\n\t}\n}","import Common from '../common/common';\nimport AWS from 'aws-sdk';\nconst dynamodb = new AWS.DynamoDB.DocumentClient();\nimport dynamoDB from '../common/dynamodb';\nimport StatusCode from '../common/statusCode';\nlet statusCode = new StatusCode().getStatusCode();\n// AWS.config.region = 'us-east-1';\n\nexport function addCustomer(event, context, callback) {\n\n\tlet eventData;\n\tlet email;\n\tlet created_at = new Date().getTime();\n\tif (!event.body || !event.pathParameters.email) {\n\t\tcallback(null, new Common().callbackHandler(statusCode.BAD_REQUEST, 'Event Body or email is missing !!!'));\n\t\t// callback(null, new Error('Malformed input ...'));\n\t\treturn;\n\t} else {\n\t\teventData = JSON.parse(event.body);\n\t\temail = event.pathParameters.email;\n\t}\n\n\tlet Item = {\n\t\temail: decodeURIComponent(email),\n\t\tcreated_at: created_at,\n\t\tcustomerData: eventData\n\t};\n\n\tlet postParams = new Common().postParams(process.env.CUSTOMER_INFO, Item);\n\n\tconsole.log(postParams);\n\tconsole.log('dasd ----> ', JSON.stringify(new Common().callbackHandler(statusCode.NO_CONTENT, 'err')));\n\n\tdynamoDB.put(postParams, (err, data) => {\n\t\tif (err) {\n\t\t\tconsole.log('Unable to add records in table. Error JSON: ', JSON.stringify(err, undefined, 2));\n\t\t\treturn callback(null, new Common().callbackHandler(statusCode.NO_CONTENT, err));\n\t\t}\n\n\t\tconsole.log('Data added successfully', data);\n\t\tcallback(null, new Common().callbackHandler(statusCode.OK, { email: decodeURIComponent(email), cutsomerData: eventData }));\n\t});\n\n}\n\nexport function getCustomersList(event, context, callback) {\n\t\n\tcontext.callbackWaitsForEmptyEventLoop = false\n\n\tlet scanParams = new Common().scanParams(process.env.CUSTOMER_INFO || 'customer-info');\n\tconsole.log(scanParams);\n\n\tdynamodb.scan(scanParams, async (err, data) => {\n\t\tif(err) {\n\t\t\tconsole.log('Unable to scan table. ERROR JSON: ', JSON.stringify(err, undefined, 2));\n\t\t\treturn callback(null, new Common().callbackHandler(statusCode.BAD_REQUEST, err));\n\t\t}\n\n\t\tconsole.log('Result - ', data);\n\t\tconsole.log(await new Common().callbackHandler(statusCode.OK, data))\n\t\tcallback(null, {\n\t\t\tStatusCode: 201,\n\t\t\theaders: {\n\t\t\t\t'Access-Control-Allow-Origin': '*',\n\t\t\t\t'Access-Control-Allow-Headers': '*',\n\t\t\t\t'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS,POST,PUT' \n\t\t\t},\n\t\t\tbody: JSON.stringify('success')\n\t\t});\n\t\treturn;\n\t});\n}\n\nexport function getCustomer(event, context, callback) {\n\n\tlet email = null;\n\n\tif(!event.pathParameters || !event.pathParameters) {\n\t\tconsole.log('Email is missing!!');\n\t\tcallback(null, new Common().callbackHandler(statusCode.BAD_REQUEST, 'Email is missing !!!'));\n\t\treturn;\n\t} else {\n\t\temail = decodeURIComponent(event.pathParameters.email);\n\t}\n\n\tlet queryParams = new Common().queryParams(process.env.CUSTOMER_INFO, 'email', email);\n\n\tdynamoDB.query(queryParams, (err, result) => {\n        \n\t\tif(err) {\n\t\t\tconsole.log('Unable to scan table. Error JOSN: ', JSON.stringify(err, undefined, 2));\n\t\t\tcallback(null, new Common().callbackHandler(statusCode.BAD_REQUEST,err));\n\t\t\treturn;\n\t\t}\n\n\t\tif(result.Items.length) {\n\t\t\tconsole.log('Result - ', result.Items[0]);\n\t\t\tcallback(null, new Common().callbackHandler(statusCode.OK, result.Items[0]));\n\t\t\treturn;\n\t\t} else {\n\t\t\tcallback(null, new Common().callbackHandler(statusCode.OK, 'No data associated with this ID'));\n\t\t\treturn;\n\t\t}\n\t});\n}","module.exports = require(\"aws-sdk\");","module.exports = require(\"babel-runtime/core-js/json/stringify\");","module.exports = require(\"babel-runtime/helpers/asyncToGenerator\");","module.exports = require(\"babel-runtime/helpers/classCallCheck\");","module.exports = require(\"babel-runtime/helpers/createClass\");","module.exports = require(\"babel-runtime/regenerator\");","module.exports = require(\"dotenv\");","module.exports = require(\"source-map-support/register\");"],"sourceRoot":""}